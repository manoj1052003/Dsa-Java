package com.bank.app;

import java.util.ArrayList;
import java.util.Scanner;

import com.bank.dao.CustomerDAO;
import com.bank.dao.CustomerDAOimp;
import com.bank.dao.TransactionDAO;
import com.bank.dao.TransactionDAOimp;
import com.bank.dto.Customer;
import com.bank.dto.Transaction;

public class Login {

	public static void login() {
		
		Scanner sc = new Scanner(System.in);
		
		CustomerDAO cdao = new CustomerDAOimp();
		
		System.out.println("<------Login form------>");
		
		System.out.println("enter account number");
		long acc = sc.nextLong();
		
		System.out.println("enter pin");
		int pin = sc.nextInt();
		
		Customer c = cdao.getCustomer(acc, pin);
		TransactionDAO tdao = new TransactionDAOimp();
		
		System.out.println(c.getAcc_no());
		int choice = 0;
		if(acc == 1100110011) {
			
			do {
				System.out.println("1 : get customer data");
				System.out.println("2 : get transaction list");
				System.out.println("3 : delete any user");
				System.out.println("4 : access your account");
				System.out.println("5 : update your account");
				System.out.println("6 : goint back to main menu");
				choice = sc.nextInt();
				switch(choice){
				
				case 1:
					ArrayList<Customer> arr = cdao.getCustomer();
					for(Customer c1: arr) {
						System.out.println(c1);
					}
					break;
				case 2:
					ArrayList<Transaction> arr1 = tdao.getTransaction();
					for(Transaction obj : arr1) {
						System.out.println("==============================");
						System.out.println("user" + obj.getUser_acc());
						System.out.println("recver"+obj.getRec_acc());
						System.out.println("type"+obj.getTransaction_type());
						System.out.println("amount"+ obj.getAmount());
						System.out.println("balance"+obj.getBalance());
						System.out.println("==============================");
					}
					break;
				case 3:
					//System.out.println();
					break;
				case 4:
					System.out.println(c);
					break;
				case 5:
					Update.updateUser(c);
					break;
				case 6:
					System.out.println("going back to the main menu");
					break;
				default:
					System.out.println("invalid choice");
				}	
			}
			while(choice!=6);
		}
		else {
			PrintPassBook p =  new PrintPassBook();
			do {
				System.out.println("1 :check balance");
				System.out.println("2 : deposite");
				System.out.println("3 : tansfer the amount");
				System.out.println("4 : view passbook");
				System.out.println("5 : update your account");
				System.out.println("6 : back to main menu");
				
				choice = sc.nextInt(); 
				
				switch(choice) {
				case 1:
					System.out.println(c.getBalance());
					break;
				case 2:
					//deposit to self account
					System.out.println("enter the amount to be deposite");
					double amount1 = sc.nextDouble();
					c.setBalance(amount1+c.getBalance());
					System.out.println(c);
					boolean res=cdao.updateCustomer(c);
					System.out.println(res);
					
					break;
				case 3:
					System.out.println("enter the account no you wanna transfer the amount");
					long acc_no = sc.nextLong();
					System.out.println("enter the amount to be transfer");
					double amount = sc.nextDouble();
					TransferAmount.transfer(c, amount, acc_no);
					break;
				case 4:
					p.print(c);
					break;
				case 5:
					System.out.println("-- updating your account--");
					Update.updateUser(c);
					break;
				case 6:
					//main menu
					break;
				default:
					System.out.println("wrong entry goint to previous menu");
				}
			}
			while(choice!=6);
		}
		
		
	}

}
